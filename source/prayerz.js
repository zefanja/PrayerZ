enyo.kind({    name: "PrayerZ.main",    kind: enyo.VFlexBox,    components: [        {kind: enyo.ApplicationEvents, onBack: "goBack"},        {kind: "PalmService", service: "palm://com.palm.applicationManager/", method: "open"},        {kind: "AppMenu", components: [            {caption: $L("Preferences"), onclick: "openPrefs"},            {caption: $L("Help"), onclick: "openHelp"},            {caption: $L("Leave A Review"), onclick: "openReview"},            {caption: $L("About"), onclick: "openAbout"}        ]},        {name: "about", kind: "PrayerZ.About"},        {name: "main", flex: 1, kind: "Pane", transitionKind: "enyo.transitions.Simple", onSelectView: "viewSelected", components: [            {name: "list", kind: "PrayerZ.list", onAdd: "openNewPrayer", onEdit: "editPrayer"},            {name: "add", kind: "PrayerZ.add", onBack: "openListView"},            {name: "prefs", kind: "PrayerZ.preferences", onBack: "openListView"}        ]}    ],    create: function () {        this.inherited(arguments);        enyo.application.prefs = window.localStorage;        tools.createDB();    },    rendered: function () {        this.inherited(arguments);        this.today = this.$.list.getToday();        tools.getPrayers(this.today, enyo.application.prefs.answer, enyo.bind(this.$.list, this.$.list.handlePrayers));        this.$.prefs.setShowAnswer();    },    openListView: function (inSender, inEvent) {        this.$.main.selectViewByName("list");    },    openNewPrayer: function (inSender, inEvent) {        this.$.main.selectViewByName("add");        this.$.add.clearInput();        this.$.add.setFocus();    },    openPrefs: function (inSender, inEvent) {        this.$.main.selectViewByName("prefs");        this.$.prefs.setTags();        tools.getTags(enyo.bind(this.$.prefs, this.$.prefs.handleTags));    },    editPrayer: function (inSender, inEvent) {        //enyo.log(inSender.rowIndex);        this.$.main.selectViewByName("add");        this.$.add.setPrayer(inSender.allPrayers[inSender.rowIndex]);    },    viewSelected: function (inSender, inView, inPreviousView) {        //enyo.log(inView.name);        if (inView.name === "list")            tools.getPrayers(this.$.list.getDay(), enyo.application.prefs.answer, enyo.bind(this.$.list, this.$.list.handlePrayers));    },    goBack: function(inSender, inEvent) {        if (enyo.fetchDeviceInfo().keyboardAvailable) {            if (this.$.main.getViewName() != "list") {                this.$.main.selectViewByName("list");                inEvent.stopPropagation();                inEvent.preventDefault();                return -1;            }        }    },    openHelp: function () {        this.$.palmService.call({            id: 'com.palm.app.browser',            params: {                "target": "http://zefanjas.de/prayerz"            }        });    },    openAbout: function ()  {        this.$.about.openAtCenter();    },    openReview: function () {        window.location = "http://developer.palm.com/appredirect/?packageid=de.zefanjas.prayerz";    },    openAppMenuHandler: function() {        this.$.appMenu.open();    },        closeAppMenuHandler: function() {        this.$.appMenu.close();    }});enyo.kind({    name: "PrayerZ.About",    style: "max-width: 350px;",    scrim: true,    kind: "Popup", components: [        {kind: "PalmService", service: "palm://com.palm.applicationManager/", method: "open"},        {kind: "BasicScroller", autoVertical: true, style: "height: auto;", flex: 1, components: [           {content: $L("About ") + "PrayerZ", className: "popup-title"},           {content: "Version 1.0.0", className: "popup-version"},           {style: "text-align: center;", components:[{kind: "Image", style: "width: 80px;", src: "images/prayerz128.png"}]},           {content: $L("PrayerZ is licensed under") + " <a href='http://www.gnu.org/licenses/gpl.txt'>GPLv3</a>.<br>&copy; 2012 by <a href='http://zefanjas.de'>zefanjas.de</a>", className: "popup-info"},           {style: "text-align: center;", components:[{content: "<a href='http://www.facebook.com/pages/zefanjas/118603198178545'><img src='images/facebook_32.png'/></a>  <a href='http://twitter.com/biblez'><img src='images/twitter_32.png'/></a>"}]}        ]},        {kind: "HFlexBox", components: [            {kind: "Button", flex: 1, caption: $L("Close"), onclick: "doCancel"},            {kind: "Button", flex: 1, className: "enyo-button-affirmative", caption: $L("Send eMail"), onclick: "sendMail"}        ]}            ],        doCancel: function () {     this.close();    },        sendMail: function () {        this.$.palmService.call({           id: 'com.palm.app.email',              params: {                 summary: $L("Support ") + "PrayerZ 1.0.0",                 "recipients":[{                      "type":"email",                      "contactDisplay":"Zefanjas Support",                      "role":1,                      "value":"info@zefanjas.de"                  }]              }        });    }});